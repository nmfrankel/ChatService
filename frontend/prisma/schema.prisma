generator client {
	provider = "prisma-client-js"
}

datasource db {
	provider	= "cockroachdb"
	url			= process.env.DATABASE_URL ?? import.meta.env.DATABASE_URL
}
console.log(JSON.stringify(process.env.DATABASE_URL))
console.log(import.meta.env.DATABASE_URL)
model User {
	id			String		@id @default(cuid())
	role		String		@default("USER")
	email		String
	pswd		String?
	handle		String?
	first		String
	last		String
	phone		String		@unique
	asSender	Msg[]		@relation("asSender")
	asReceiver	Msg[]		@relation("asReceiver")
}

model Msg {
	id			String		@id @default(cuid())
	sender		User		@relation("asSender", fields: [senderId], references: [id])
	senderId	String
	receiver	User		@relation("asReceiver", fields: [receiverId], references: [id])
	receiverId	String
	msgType		String		@default("text/plain")
	content		String
	posted		DateTime	@default(now())
	metadata	String
}

// npx prisma migrate dev --name init
